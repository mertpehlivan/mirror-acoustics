<!DOCTYPE html>
<html lang="tr" xmlns:th="http://www.thymeleaf.org" th:fragment="layout (title, content)">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title th:text="${title} ?: 'Mirror Acoustics'">Mirror Acoustics</title>
    <meta th:if="${description}" name="description" th:content="${description}" />
    <th:block th:replace="~{fragments/head-meta :: seoMeta(${p}, ${lang})}"></th:block>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link th:href="@{/css/app.css}" rel="stylesheet" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;500;600;700&family=Poppins:wght@300;400;500;600&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" integrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2Pkf6hJ8N2WapveufqfwnOeDs5l1Qn9gRZxB3GZ9JQY1M6d0gYx4jvZ5mA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        brand: {
                            50: '#EDE6E0',
                            100: '#DCCFC5',
                            200: '#C7B4A4',
                            300: '#B4977F',
                            400: '#8E6B4D',
                            500: '#6F523A',
                            600: '#5A432F',
                            700: '#4B3828',
                            800: '#3D2E21',
                            900: '#2F2319'
                        }
                    }
                }
            }
        }
    </script>
    <script>
        if (localStorage.theme === 'dark' || (!('theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
            document.documentElement.classList.add('dark');
        }
    </script>
    <style>
        body {
            font-family: 'Poppins', sans-serif;
        }

        .title-font {
            font-family: 'Playfair Display', serif;
        }

        footer {
            border-top: 1px solid #eee;
            margin-top: 3rem;
            padding-top: 1rem;
            color: #777;
        }

        .line-clamp {
            display: -webkit-box;
            -webkit-line-clamp: 3;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }
    </style>
</head>

<body class="bg-gradient-to-b from-brand-50 to-white dark:from-gray-950 dark:to-gray-900">
    <header class="sticky top-0 z-50 backdrop-blur bg-white/80 dark:bg-gray-900/70 border-b border-neutral-100 dark:border-gray-800">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex h-16 items-center justify-between">
                <a th:href="@{/}" class="title-font text-2xl font-bold text-brand-900 dark:text-brand-100">MIRROR ACOUSTICS</a>
                <nav class="hidden md:flex items-center space-x-8" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
                    <a th:href="@{/}" class="text-gray-700 hover:text-brand-700 dark:text-gray-200" th:text="#{nav.home}">Ana Sayfa</a>
                    <a th:href="@{/urun}" class="text-gray-700 hover:text-brand-700 dark:text-gray-200" th:text="#{nav.products}">√úr√ºnler</a>
                    <a th:href="@{/cart}" th:text="#{nav.cart}" class="text-gray-700 hover:text-brand-700 dark:text-gray-200">Sepet</a>
                    <a th:href="@{/hakkimizda}" class="text-gray-700 hover:text-brand-700 dark:text-gray-200" th:text="#{nav.about}">Hakkƒ±mƒ±zda</a>
                    <a th:href="@{/iletisim}" class="text-gray-700 hover:text-brand-700 dark:text-gray-200" th:text="#{nav.contact}">ƒ∞leti≈üim</a>
                    <a sec:authorize="!isAuthenticated()" th:href="@{/admin/login}" class="text-gray-700 hover:text-brand-700 dark:text-gray-200" th:text="#{nav.admin}">Admin</a>
                    <a sec:authorize="isAuthenticated()" th:href="@{/admin/products}" class="text-gray-700 hover:text-brand-700 dark:text-gray-200" th:text="#{nav.management}">Y√∂netim</a>
                    <form sec:authorize="isAuthenticated()" th:action="@{/admin/logout}" method="post">
                        <button class="text-gray-700 hover:text-amber-700 dark:text-gray-200" type="submit" th:text="#{nav.logout}">√áƒ±kƒ±≈ü</button>
                    </form>
                </nav>
                <div class="flex items-center gap-3">
                    <a th:href="@{/?lang=en}"
                       th:class="${lang == 'en'} ? 'hidden md:inline text-sm px-2 py-1 rounded border bg-amber-100 text-amber-800 dark:bg-amber-900 dark:text-amber-200' : 'hidden md:inline text-sm px-2 py-1 rounded border hover:bg-neutral-50 dark:hover:bg-gray-800'"
                       th:text="#{lang.en}">EN</a>
                    <a th:href="@{/?lang=tr}"
                       th:class="${lang == 'tr'} ? 'hidden md:inline text-sm px-2 py-1 rounded border bg-amber-100 text-amber-800 dark:bg-amber-900 dark:text-amber-200' : 'hidden md:inline text-sm px-2 py-1 rounded border hover:bg-neutral-50 dark:hover:bg-gray-800'"
                       th:text="#{lang.tr}">TR</a>
                    <button type="button" onclick="themeToggle()" class="text-xl text-gray-800 hover:text-amber-600 dark:text-gray-100" aria-label="Tema deƒüi≈ütir">üåì</button>
                </div>
            </div>
        </div>
    </header>

    <main>
        <th:block th:replace="${content}">
            <!-- Content will be inserted here -->
        </th:block>
    </main>

    <footer class="bg-white dark:bg-neutral-950 border-t border-black/5 dark:border-white/10">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-10 grid md:grid-cols-3 gap-8 items-center">
            <div class="text-sm text-gray-600 dark:text-gray-400">
                ¬© <span th:text="${#calendars.format(#calendars.createNow(), 'yyyy')}"></span> Mirror Acoustics. 
                <span th:text="#{footer.rights}">T√ºm haklarƒ± saklƒ±dƒ±r.</span>
            </div>
            <div class="justify-self-center text-sm flex items-center gap-4">
                <a th:href="@{/urun}" class="text-gray-700 dark:text-gray-200 hover:text-amber-700" th:text="#{nav.products}">√úr√ºnler</a>
                <a th:href="@{/iletisim}" class="text-gray-700 dark:text-gray-200 hover:text-amber-700" th:text="#{nav.contact}">ƒ∞leti≈üim</a>
                <a href="#about" class="text-gray-700 dark:text-gray-200 hover:text-amber-700" th:text="#{nav.about}">Hakkƒ±mƒ±zda</a>
            </div>
            <div class="justify-self-end text-sm text-gray-600 dark:text-gray-400" th:text="#{footer.madeWith}">
                ƒ∞stanbul'da ‚ù§Ô∏è ile yapƒ±ldƒ±
            </div>
        </div>
    </footer>

    <script>
        function themeToggle() {
            const root = document.documentElement;
            const isDark = root.classList.toggle('dark');
            localStorage.theme = isDark ? 'dark' : 'light';
        }
    </script>
</body>

</html>