<!DOCTYPE html>
<html lang="tr" xmlns:th="http://www.thymeleaf.org" th:replace="~{layout :: layout(${title}, ~{::content})}">
<th:block th:fragment="content">
    <div class="py-6">
        <h1 class="text-2xl font-semibold text-amber-900 mb-4" th:text="${title ?: 'Ürünler'}">Ürünler</h1>
        <form class="mb-4" th:action="@{/urun}" method="get">
            <input class="border rounded px-3 py-1 w-full md:w-1/3" type="text" name="q" th:value="${q}" placeholder="Ara...">
        </form>

        <div th:if="${page == null or page.empty}" class="text-muted">
            <p>Henüz ürün yok.</p>
        </div>

        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4" th:if="${page != null and !page.empty}">
            <a class="group rounded-lg overflow-hidden border hover:shadow-md transition" th:each="p : ${page}"
                th:href="@{|/urun/${p.slug}?lang=${lang}|}">
                <img th:if="${#lists.size(p.images)>0}" th:src="${p.images.get(0).url}" class="w-full h-48 object-cover"
                    th:alt="${lang=='en'? p.titleEn : p.titleTr}" loading="lazy" />
                <div class="p-3">
                    <h2 class="text-base font-medium text-neutral-900 group-hover:text-amber-900"
                        th:text="${lang=='en'? p.titleEn : p.titleTr}">Ürün Adı</h2>
                    <div class="text-sm text-neutral-500"
                        th:text="${p.currency} + ' ' + ${#numbers.formatDecimal(p.price, 1, 'POINT', 2, 'POINT')}">₺ 0,00</div>
                </div>
            </a>
        </div>

        <nav th:if="${page != null and page.totalPages > 1}" aria-label="Sayfalama" class="mt-6">
            <div class="flex items-center gap-2">
                <a class="px-3 py-1 rounded border hover:bg-neutral-50"
                    th:classappend="${page.first}? 'pointer-events-none opacity-50'"
                    th:href="@{|/urun?page=${page.number-1}&q=${q}|}">Önceki</a>
                <span class="text-sm text-neutral-500" th:text="${page.number+1} + ' / ' + ${page.totalPages}">1 / 1</span>
                <a class="px-3 py-1 rounded border hover:bg-neutral-50"
                    th:classappend="${page.last}? 'pointer-events-none opacity-50'"
                    th:href="@{|/urun?page=${page.number+1}&q=${q}|}">Sonraki</a>
            </div>
        </nav>
    </div>
</th:block>

</html>